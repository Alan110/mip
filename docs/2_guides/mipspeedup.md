# MIP 加速原理

本文讲述mip页面加速的原理

## Javascript的讲究

不能为你的MIP文件写任何的JavaScript，这样就没有了臃肿的客户端脚本；广告、统计和交互等都需要JavaScript，MIP代替之是可以使用能够与MIP runtime兼容的封装的组件来完成这些功能。

Javascript 引用原则：
	
	目前MIP不允许用户自定义Javascript，需要用MIP 组件的形式引进来，从而确保安全性和性能表现

	如果用户需要实现一些富交互的功能，可以引用mip-iframe来引入，这样，即使用户使用最影响新能的document.write，也不会影响主页面的渲染

	MIP组件是开源的，允许开发者自己来进行功能组件开发，我们也会尽力提供足够多样的组件，以适应范围足够广的内容

## 所有静态资源需要标明尺寸

资源经常不指明他们的宽高（特别是使用广告或者通过调用document.write()注入的时候）。因为资源的大小迟迟不能决定，页面经常要进行重新的绘制，广告、图片、音频和视频等外部资源真正加载前推断出所有外部资源的尺寸，那样MIP才能够迅速的计算出最终的布局，这些加载中的资源，会无缝的呈现，不会因为需要更新页面的布局而影响到阅读体验。

## 不允许任何机制阻止页面的渲染

任何用户的自定义脚本，都需要用MIP的tag告诉MIP，例如mip-ad、mip-iframe等，然而这些方式不会阻塞页面的layout和渲染

## 控制外部资源加载

MIP runtime会控制外部资源的额加载来确保其高效性，从而让用户需要的内容尽快地出现在屏幕上。

## 封装交互功能

虽然MIP提倡提供给用户直接简单的用户体验，但是这并不妨碍他们变得现代和互动。MIP runtime提供了高度优化的被封装的JavaScript，所以开发者不需要冒险写他们自己的交互功能。

## 只允许inline的css

css的加载，会阻止页面的渲染，css内联可以减少客户端的开销

## 只允许GPU加速的动画

只允许用transforms和opacity来完成动画效果，这样就能在GPU上执行，仅触发渲染层合并。


## MIP 缓存

MIP另一个重要的意义在于能够帮站长加速他们的网页，百度将会把他们的网页缓存到百度自己的CDN中。只要符合MIP标准，都可以使用MIP缓存。

## 帮助MIP变得更快

MIP是一个开源项目，需要广大开发者来让MIP变得更快